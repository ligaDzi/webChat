(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,n){},156:function(e,t,n){},216:function(e,t,n){e.exports=n(371)},248:function(e,t){},363:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),o=n.n(c),s=n(16),u=n(68),l=n(174),i=n(8),m=n.n(i),d="webSocket",p=n(39),b=n(2),f=n(32),O=n(128),v=n(71),E=n(52),x=n(176),h={socket:n.n(x)()("http://localhost:80",{autoConnect:!1}),connectSocket:function(){var e=this;return new Promise((function(t,n){try{e.socket.connected?t(e.socket):(e.socket.open(),e.socket.on("connect",(function(){t(e.socket)})))}catch(r){n(r)}}))},disconnectSocket:function(){this.socket.connected&&this.socket.close()}},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a;return e.reduce((function(e,n){return e.set(n.id,new t(n))}),new p.b({}))},g=Object(p.c)({rooms:new p.b({}),error:null,loading:!1}),k=Object(p.c)({id:null,name:null,isActive:!1,newMesSize:0,users:[],messages:[]}),y="".concat(d,"/").concat("room"),S="".concat(y,"/ADD_ROOM_REQUEST"),w="".concat(y,"/ADD_ROOM_SUCCESS"),R="".concat(y,"/ADD_ROOM_ERROR"),_="".concat(y,"/FETCH_ROOMS_REQUEST"),I="".concat(y,"/FETCH_ROOMS_SUCCESS"),C="".concat(y,"/FETCH_ROOMS_ERROR"),N="".concat(y,"/FETCH_MESSAGE_ROOM_SUCCESS"),U="".concat(y,"/FETCH_MESSAGE_ROOM_ERROR"),T="".concat(y,"/FETCH_USERS_ROOM_SUCCESS"),M="".concat(y,"/FETCH_USERS_ROOM_ERROR"),A="".concat(y,"/USER_CONNECT_ROOM_REQUEST"),F="".concat(y,"/USER_CONNECT_ROOM_SUCCESS"),D="".concat(y,"/USER_CONNECT_ROOM_ERROR"),G="".concat(y,"/CLOSE_ROOM_REQUEST"),z="".concat(y,"/CLOSE_ROOM_SUCCESS"),H="".concat(y,"/CLOSE_ROOM_ERROR"),Q="".concat(y,"/ADD_MESSAGE_REQUEST"),q="".concat(y,"/ADD_MESSAGE_SUCCESS"),L="".concat(y,"/ADD_MESSAGE_ERROR"),J="".concat(y,"/ADD_USER_ROOM_SUCCESS"),P="".concat(y,"/ADD_USER_ROOM_ERROR"),B="".concat(y,"/DEL_USER_ROOM_SUCCESS"),V="".concat(y,"/DEL_USER_ROOM_ERROR"),W="".concat(y,"/CHANGE_ACTIVE_ROOM");function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=t.error;switch(n){case _:case A:return e.set("loading",!0);case I:return e.set("loading",!1).update("rooms",(function(e){return j(r.rooms,k).merge(e)})).set("error",null);case w:return e.set("loading",!1).update("rooms",(function(e){return e.merge(j([r.room],k))})).set("error",null);case F:return e.set("loading",!1).setIn(["rooms",r.roomId,"newMesSize"],0).set("error",null);case J:return e.updateIn(["rooms",r.roomId,"users"],(function(e){return[].concat(Object(O.a)(e),[r.user])})).set("error",null);case B:return e.updateIn(["rooms",r.roomId,"users"],(function(e){return e.filter((function(e){return e.id!==r.userId}))})).set("error",null);case z:return e.updateIn(["rooms",r.roomId,"users"],(function(e){return[]}));case q:return e.updateIn(["rooms",r.roomId,"messages"],(function(e){return[].concat(Object(O.a)(e),[r.message])})).updateIn(["rooms",r.roomId,"newMesSize"],(function(e){return e+1})).set("error",null);case N:return e.setIn(["rooms",r.roomId,"messages"],r.messages);case T:return e.setIn(["rooms",r.roomId,"users"],r.users);case C:case R:case L:case D:case P:case V:case M:case U:return e.set("loading",!1).set("error",a);case H:return e.set("error",a);case W:return e.setIn(["rooms",r.roomId,"newMesSize"],0);default:return e}}var K=Object(E.a)((function(e){return e.room}),(function(e){return e.rooms})),Y=Object(E.a)(K,(function(e){return e.valueSeq().toArray()})),Z=Object(E.a)((function(e){return e[ve]}),(function(e){return e.user.rooms})),$=Object(E.a)(K,Z,(function(e,t){var n=[];return t.forEach((function(t){e.get(t)&&n.push(e.get(t))})),n}));var ee=function(e,t){return Object(v.c)((function(n){var r=function(e){return n(e)};return e.on(t,r),function(){e.off(t,r),n(v.a)}}))},te=m.a.mark((function e(t){var n,r,a,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socket,e.next=3,Object(b.b)(ee,n,"getAllRoom");case 3:r=e.sent,e.prev=4;case 5:return e.next=8,Object(b.f)(r);case 8:if(a=e.sent,c=a.rooms,o=a.error,!c){e.next=18;break}return e.next=14,Object(b.e)({type:I,payload:{rooms:c}});case 14:return e.next=16,Object(b.b)([r,r.close]);case 16:e.next=19;break;case 18:throw o;case 19:e.next=5;break;case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(4),e.next=27,Object(b.e)({type:C,error:e.t0});case 27:return e.prev=27,e.next=30,Object(b.b)([r,r.close]);case 30:return e.finish(27);case 31:case"end":return e.stop()}}),e,null,[[4,23,27,31]])})),ne=m.a.mark((function e(t){var n,r,a,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socket,e.next=3,Object(b.b)(ee,n,"newRoom");case 3:r=e.sent,e.prev=4;case 5:return e.next=8,Object(b.f)(r);case 8:if(a=e.sent,c=a.room,o=a.error,!c){e.next=16;break}return e.next=14,Object(b.e)({type:w,payload:{room:c}});case 14:e.next=17;break;case 16:throw o;case 17:e.next=5;break;case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(4),e.next=25,Object(b.e)({type:R,error:e.t0});case 25:return e.prev=25,e.next=28,Object(b.b)([r,r.close]);case 28:return e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[4,21,25,29]])})),re=m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.b)([h,h.connectSocket]);case 3:return n=e.sent,e.next=6,Object(b.d)(te,{socket:n});case 6:return e.next=8,Object(b.d)(ne,{socket:n});case 8:r=t.payload.userId,n.emit("allRoom",{userId:r}),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,Object(b.e)({type:C,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})),ae=m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.payload.roomName,e.next=4,Object(b.b)([h,h.connectSocket]);case 4:return e.sent.emit("newRoom",n),e.next=8,Object(b.e)(Object(f.a)("addroom"));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(b.e)({type:R,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})),ce={},oe=m.a.mark((function e(t){var n,r,a,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socket,r=t.roomId,e.next=3,Object(b.b)(ee,n,"user-".concat(r));case 3:a=e.sent,e.prev=4;case 5:return e.next=8,Object(b.f)(a);case 8:if(c=e.sent,o=c.user,s=c.error,!o){e.next=16;break}return e.next=14,Object(b.e)({type:J,payload:{roomId:r,user:o}});case 14:e.next=17;break;case 16:throw s;case 17:e.next=5;break;case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(4),e.next=25,Object(b.e)({type:P,error:e.t0});case 25:return e.prev=25,e.next=28,Object(b.b)([a,a.close]);case 28:return e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[4,21,25,29]])})),se=m.a.mark((function e(t){var n,r,a,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socket,r=t.roomId,e.next=3,Object(b.b)(ee,n,"message-".concat(r));case 3:a=e.sent,e.prev=4;case 5:return e.next=8,Object(b.f)(a);case 8:if(c=e.sent,o=c.message,s=c.error,!o){e.next=16;break}return e.next=14,Object(b.e)({type:q,payload:{roomId:r,message:o}});case 14:e.next=17;break;case 16:throw s;case 17:e.next=5;break;case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(4),e.next=25,Object(b.e)({type:L,error:e.t0});case 25:return e.prev=25,e.next=28,Object(b.b)([a,a.close]);case 28:return e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[4,21,25,29]])})),ue=m.a.mark((function e(t){var n,r,a,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socket,r=t.roomId,e.next=3,Object(b.b)(ee,n,"getAllMesRoom-".concat(r));case 3:a=e.sent,e.prev=4;case 5:return e.next=8,Object(b.f)(a);case 8:if(c=e.sent,o=c.messages,s=c.error,!o){e.next=16;break}return e.next=14,Object(b.e)({type:N,payload:{roomId:r,messages:o}});case 14:e.next=17;break;case 16:throw s;case 17:e.next=5;break;case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(4),e.next=25,Object(b.e)({type:U,error:e.t0});case 25:return e.prev=25,e.next=28,Object(b.b)([a,a.close]);case 28:return e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[4,21,25,29]])})),le=m.a.mark((function e(t){var n,r,a,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socket,r=t.roomId,e.next=3,Object(b.b)(ee,n,"getAllUserRoom-".concat(r));case 3:a=e.sent,e.prev=4;case 5:return e.next=8,Object(b.f)(a);case 8:if(c=e.sent,o=c.users,s=c.error,!o){e.next=16;break}return e.next=14,Object(b.e)({type:T,payload:{roomId:r,users:o}});case 14:e.next=17;break;case 16:throw s;case 17:e.next=5;break;case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(4),e.next=25,Object(b.e)({type:M,error:e.t0});case 25:return e.prev=25,e.next=28,Object(b.b)([a,a.close]);case 28:return e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[4,21,25,29]])})),ie=m.a.mark((function e(t){var n,r,a,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socket,r=t.roomId,e.next=3,Object(b.b)(ee,n,"leaveUser=".concat(r));case 3:a=e.sent,e.prev=4;case 5:return e.next=8,Object(b.f)(a);case 8:if(c=e.sent,o=c.userId,s=c.error,!o){e.next=16;break}return e.next=14,Object(b.e)({type:B,payload:{roomId:r,userId:o}});case 14:e.next=17;break;case 16:throw s;case 17:e.next=5;break;case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(4),e.next=25,Object(b.e)({type:V,error:e.t0});case 25:return e.prev=25,e.next=28,Object(b.b)([a,a.close]);case 28:return e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[4,21,25,29]])})),me=m.a.mark((function e(t){var n,r,a,c,o,s,u,l,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.payload,r=n.userId,a=n.roomId,e.next=4,Object(b.b)([h,h.connectSocket]);case 4:if((c=e.sent).emit("join",{userId:r,roomId:a}),ce[a]||(ce[a]={}),ce[a].allMesRoomTask){e.next=28;break}return e.next=10,Object(b.d)(le,{socket:c,roomId:a});case 10:return o=e.sent,ce[a].allUserRoomTask=o,e.next=14,Object(b.d)(ue,{socket:c,roomId:a});case 14:return s=e.sent,ce[a].allMesRoomTask=s,e.next=18,Object(b.d)(se,{socket:c,roomId:a});case 18:return u=e.sent,ce[a].messageTask=u,e.next=22,Object(b.d)(oe,{socket:c,roomId:a});case 22:return l=e.sent,ce[a].userTask=l,e.next=26,Object(b.d)(ie,{socket:c,roomId:a});case 26:i=e.sent,ce[a].leaveUserTask=i;case 28:return e.next=30,Object(b.e)({type:F,payload:{roomId:a}});case 30:e.next=36;break;case 32:return e.prev=32,e.t0=e.catch(0),e.next=36,Object(b.e)({type:D,error:e.t0});case 36:case"end":return e.stop()}}),e,null,[[0,32]])})),de=m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.payload.roomId,e.next=4,Object(b.b)([h,h.connectSocket]);case 4:return e.sent.emit("close-room-".concat(n),{closeRoomId:n}),e.next=8,Object(b.c)(ce[n].allUserRoomTask);case 8:return e.next=10,Object(b.c)(ce[n].allMesRoomTask);case 10:return e.next=12,Object(b.c)(ce[n].userTask);case 12:return e.next=14,Object(b.c)(ce[n].messageTask);case 14:return e.next=16,Object(b.c)(ce[n].leaveUserTask);case 16:return ce[n]&&delete ce[n],e.next=19,Object(b.e)({type:z,payload:{roomId:n}});case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),e.next=25,Object(b.e)({type:H,error:e.t0});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})),pe=m.a.mark((function e(t){var n,r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.payload,r=n.user,a=n.roomId,c=n.message,e.next=4,Object(b.b)([h,h.connectSocket]);case 4:return e.sent.emit("message-".concat(a),{user:r,message:c}),e.next=8,Object(b.e)(Object(f.a)("message"));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(b.e)({type:L,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})),be=m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([Object(b.g)(_,re),Object(b.g)(S,ae),Object(b.g)(A,me),Object(b.g)(G,de),Object(b.g)(Q,pe)]);case 2:case"end":return e.stop()}}),e)})),fe=Object(p.c)({id:null,name:null,email:null,rooms:[]}),Oe=Object(p.c)({user:null,error:null,loading:!1}),ve="auth",Ee="".concat(d,"/").concat(ve,"/AUTOENTER_REQUEST"),xe="".concat(d,"/").concat(ve,"/AUTOENTER_SUCCESS"),he="".concat(d,"/").concat(ve,"/AUTOENTER_ERROR"),je="".concat(d,"/").concat(ve,"/SIGN_UP_REQUEST"),ge="".concat(d,"/").concat(ve,"/SIGN_UP_SUCCESS"),ke="".concat(d,"/").concat(ve,"/SIGN_UP_ERROR"),ye="".concat(d,"/").concat(ve,"/SIGN_IN_REQUEST"),Se="".concat(d,"/").concat(ve,"/SIGN_IN_SUCCESS"),we="".concat(d,"/").concat(ve,"/SIGN_IN_ERROR"),Re="".concat(d,"/").concat(ve,"/SIGN_OUT_REQUEST"),_e="".concat(d,"/").concat(ve,"/SIGN_OUT_SUCCESS"),Ie="".concat(d,"/").concat(ve,"/SIGN_OUT_ERROR");function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oe,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=t.error;switch(n){case Ee:case ye:case je:return e.set("loading",!0);case xe:case Se:case ge:return e.set("loading",!1).set("user",new fe(r.user)).set("error",null);case he:return e.set("loading",!1);case we:case ke:case Ie:return e.set("loading",!1).set("error",a);case _e:return new Oe({});case F:return e.updateIn(["user","rooms"],(function(e){return e.concat(r.roomId)}));case z:return e.updateIn(["user","rooms"],(function(e){return e.filter((function(e){return e!==r.roomId}))}));default:return e}}Object(E.a)((function(e){return e[ve]}),(function(e){return e.user.rooms}));var Ne=m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth/autoenter");case 3:return n=e.sent,e.next=6,Object(b.b)([n,n.json]);case 6:if(!(r=e.sent).user){e.next=12;break}return e.next=10,Object(b.e)({type:xe,payload:{user:r.user}});case 10:e.next=14;break;case 12:return e.next=14,Object(b.e)({type:he});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),e.next=20,Object(b.e)({type:he});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})),Ue=m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0={"Content-Type":"application/json"},e.next=4,Object(b.b)([JSON,JSON.stringify],{name:t.payload.name,email:t.payload.email,password:t.payload.password});case 4:return e.t1=e.sent,n={method:"POST",headers:e.t0,body:e.t1},e.next=8,fetch("/api/auth/register",n);case 8:return r=e.sent,e.next=11,Object(b.b)([r,r.json]);case 11:return a=e.sent,e.next=14,Object(b.e)(Object(f.a)("auth"));case 14:if(!a.user){e.next=19;break}return e.next=17,Object(b.e)({type:ge,payload:{user:a.user}});case 17:e.next=21;break;case 19:return e.next=21,Object(b.e)({type:ke,error:a.message});case 21:e.next=27;break;case 23:return e.prev=23,e.t2=e.catch(0),e.next=27,Object(b.e)({type:ke,error:e.t2});case 27:case"end":return e.stop()}}),e,null,[[0,23]])})),Te=m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0={"Content-Type":"application/json"},e.next=4,Object(b.b)([JSON,JSON.stringify],{email:t.payload.email,password:t.payload.password});case 4:return e.t1=e.sent,n={method:"POST",headers:e.t0,body:e.t1},e.next=8,fetch("/api/auth/login",n);case 8:return r=e.sent,e.next=11,Object(b.b)([r,r.json]);case 11:return a=e.sent,e.next=14,Object(b.e)(Object(f.a)("auth"));case 14:if(!a.user){e.next=19;break}return e.next=17,Object(b.e)({type:Se,payload:{user:a.user}});case 17:e.next=21;break;case 19:return e.next=21,Object(b.e)({type:we,error:a.message});case 21:e.next=27;break;case 23:return e.prev=23,e.t2=e.catch(0),e.next=27,Object(b.e)({type:we,error:e.t2});case 27:case"end":return e.stop()}}),e,null,[[0,23]])})),Me=m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth/logout");case 3:return e.next=5,Object(b.b)([h,h.disconnectSocket]);case 5:return e.next=7,Object(b.e)({type:_e});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,Object(b.e)({type:Ie});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),Ae=m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([Object(b.g)(Ee,Ne),Object(b.g)(je,Ue),Object(b.g)(ye,Te),Object(b.g)(Re,Me)]);case 2:case"end":return e.stop()}}),e)})),Fe=function(){var e;return Object(s.c)((e={form:l.a},Object(u.a)(e,ve,Ce),Object(u.a)(e,"room",X),e))},De=m.a.mark(Ge);function Ge(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([Ae(),be()]);case 2:case"end":return e.stop()}}),De)}var ze=Object(v.b)(),He=Fe(),Qe=Object(s.a)(ze),qe=Object(s.e)(He,Qe);ze.run(Ge);var Le=qe,Je=n(21),Pe=n(36),Be=n(48),Ve=(n(114),function(e){var t=e.room,n=e.handleClick;return a.a.createElement("p",{className:"room-btn"},a.a.createElement("button",{onClick:function(){return n(t.id)}},t.name))}),We=n(172),Xe=n(173),Ke=n(40),Ye=n(41);function Ze(){var e=Object(Ke.a)(["    \n    color: #bf0018;\n    font-size: 14px;\n    font-weight: 900;\n"]);return Ze=function(){return e},e}function $e(){var e=Object(Ke.a)(["\n    display: flex;\n    justify-content: center;\n"]);return $e=function(){return e},e}var et=Ye.a.div($e()),tt=Ye.a.label(Ze()),nt=(n(156),function(e){var t=e.input,n=e.type,r=(e.htmlFor,e.id),c=e.className,o=e.autocomplete,s=e.placeholder,u=e.meta,l=u.error,i=(u.touched,u.submitFailed&&l);return a.a.createElement(et,null,a.a.createElement(tt,null,i),a.a.createElement("input",Object.assign({},t,{className:c,id:r,type:n,autoComplete:o,placeholder:s})))}),rt=[],at=Object(Xe.a)({form:"addroom",validate:function(e){var t=e.roomName,n={};return t?t.length>30&&(n.roomName="to big"):n.roomName="room name is required",rt.forEach((function(e){e.name!==t||(n.roomName="room with that name already exists")})),n}})((function(e){var t=e.handleSubmit,n=e.rooms;return Object(r.useEffect)((function(){rt=n}),[n]),a.a.createElement("form",{onSubmit:t},a.a.createElement(We.a,{name:"roomName",id:"roomName",className:"room-add",htmlFor:"roomName",type:"text",autocomplete:"off",placeholder:"Add Room",component:nt}))})),ct=Object(Je.b)((function(e){return{user:e[ve].user,rooms:Y(e)}}),{fetchAllRooms:function(e){return{type:_,payload:{userId:e}}},addRoom:function(e){return{type:S,payload:{roomName:e}}},connectUserRoom:function(e,t){return{type:A,payload:{userId:e,roomId:t}}}})((function(e){var t=e.user,n=e.rooms,c=e.fetchAllRooms,o=e.addRoom,s=e.connectUserRoom;Object(r.useEffect)((function(){c(t.id)}),[c,t]);var u=function(e){t.rooms.includes(e)||s(t.id,e)};return a.a.createElement("div",{className:"room-list"},a.a.createElement("nav",null,n.map((function(e){return a.a.createElement(Ve,{key:e.id,room:e,handleClick:u})}))),a.a.createElement(at,{rooms:n,onSubmit:function(e){var t=e.roomName;o(t)}}))})),ot=n(95),st=n(399),ut=n(62),lt=n(404),it=n(401),mt=n(96),dt=n(396),pt=n(400);var bt=function(e){var t=e.children,n=e.value,r=e.index,c=Object(mt.a)(e,["children","value","index"]);return a.a.createElement(dt.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},c),n===r&&a.a.createElement(pt.a,{p:3},t))},ft=n(398),Ot=n(397),vt=n(15),Et=n(181),xt=n.n(Et),ht=Object(vt.a)((function(e){return{badge:{right:22,top:18,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(Ot.a),jt=function(e){var t=e.handleClose,n=e.newMesSize,r=e.isActive,c=e.handleChangeActiveRoom,o=Object(mt.a)(e,["handleClose","newMesSize","isActive","handleChangeActiveRoom"]);return a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement(ft.a,Object.assign({},o,{onClick:c}))),r||n<=0?null:a.a.createElement(ht,{badgeContent:n,color:"secondary"},a.a.createElement(xt.a,null)),a.a.createElement("button",{onClick:t},"X"))},gt=n(182),kt=n(402),yt=n(126),St=n.n(yt),wt=n(98);function Rt(){var e=Object(Ke.a)(["\n    display: flex;\n    padding-bottom: 15px;\n    padding-right: 200px;\n    color: ",";\n\n    & h5 {\n        display: block;\n        margin: 0;\n        padding-right: 10px;\n    }\n\n    & div {\n        line-height: 1.8;\n    }\n"]);return Rt=function(){return e},e}function _t(){var e=Object(Ke.a)(["\n    padding: 5px;\n    color: ",";\n"]);return _t=function(){return e},e}function It(){var e=Object(Ke.a)(["\n    font-size: 16px;\n    cursor: default;\n\n    &:hover {\n        color: #24c851;\n    }\n"]);return It=function(){return e},e}function Ct(){var e=Object(Ke.a)(["\n    font-size: 8px;\n    cursor: default;\n    transition: font-size 0.1s;\n    color: ","; \n\n    &:hover {\n        font-size: 14px;  \n    }\n\n"]);return Ct=function(){return e},e}function Nt(){var e=Object(Ke.a)(["\n    position: sticky;\n    top: 0;\n    padding: 0;\n    margin: 0;\n    text-align: right;\n    overflow: auto;\n"]);return Nt=function(){return e},e}function Ut(){var e=Object(Ke.a)(["\n    position: absolute;\n    top: 15px;\n    bottom: 0;\n    right: 30px;  \n    overflow-y: hidden;\n"]);return Ut=function(){return e},e}var Tt=Ye.a.div(Ut()),Mt=Ye.a.ul(Nt()),At=Ye.a.li(Ct(),(function(e){return e.color||"inherit"})),Ft=Ye.a.li(It()),Dt=Ye.a.span(_t(),(function(e){return e.color||"inherit"})),Gt=Ye.a.div(Rt(),(function(e){return e.color||"inherit"})),zt=function(e){var t=e.user;return a.a.createElement(At,{color:t.color},t.name)},Ht=St()({luminosity:"dark",count:100}),Qt=Object(vt.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:600,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(kt.a),qt=function(e){var t=e.room,n=Object(r.useState)([]),c=Object(ot.a)(n,2),o=c[0],s=c[1],u=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=t.users.map((function(e,t){return Object(gt.a)({},e,{color:i(t)})}));s(e)}),[t.users]),Object(r.useEffect)((function(){u.current.scrollTop=u.current.scrollHeight}),[t.messages]);var l,i=function(e){if(e+1>Ht.length){var t=St()({luminosity:"dark",count:100});Ht=Ht.concat(t)}return Ht[e]},m=function(e){var t=null;return o.forEach((function(n){n.name!==e||(t=n.color)})),t},d=function(e){return a.a.createElement("div",null,e.map((function(e){return a.a.createElement(Dt,{key:"".concat(Math.random().toString()).concat(Date.now().toString()),color:e.color},e.name)})))};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:u},(l=t.messages).length<=0?null:l.map((function(e,t){return a.a.createElement(Gt,{key:e.id,color:m(e.username)},a.a.createElement("h5",null,e.username,":"),a.a.createElement("div",null,e.text))}))),a.a.createElement(Tt,null,a.a.createElement(Mt,null,a.a.createElement(wt.TransitionMotion,{styles:o.map((function(e){return{style:{opacity:Object(wt.spring)(1,{stiffness:50})},key:e.id,data:e}})),willLeave:function(){return{opacity:Object(wt.spring)(0,{stiffness:100})}},willEnter:function(){return{opacity:0}}},(function(e){return a.a.createElement("div",null,e.slice(0,42).map((function(e,t){return t<=40?a.a.createElement("div",{key:e.key,style:e.style},a.a.createElement(zt,{user:e.data})):a.a.createElement(Qt,{title:d(o),placement:"left-end"},a.a.createElement(Ft,null,"...",o.length))})))})))))},Lt=function(e){var t=e.input,n=e.type,r=e.htmlFor,c=e.id,o=e.className,s=e.autocomplete,u=e.meta,l=u.error,i=u.touched&&l&&a.a.createElement("div",{style:{color:"red"}},l);return a.a.createElement("div",{className:"input-field col s12"},a.a.createElement("input",Object.assign({},t,{className:o,id:c,type:n,autoComplete:s})),a.a.createElement("label",{htmlFor:r},t.name),i)},Jt=Object(Xe.a)({form:"message",validate:function(e){var t=e.message,n={};return t?t.length>1024&&(n.message="to big"):n.message="message is required",n}})((function(e){var t=e.handleSubmit;return a.a.createElement("form",{className:"col s12",onSubmit:t},a.a.createElement("div",{className:"row"},a.a.createElement(We.a,{name:"message",id:"send_message",className:"validate",htmlFor:"send_message",type:"text",autocomplete:"off",component:Lt})))}));n(363);var Pt=Object(st.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:"75%"}}}));var Bt=Object(Je.b)((function(e){return{user:e[ve].user,rooms:$(e)}}),{closeRoom:function(e){return{type:G,payload:{roomId:e}}},sendMessage:function(e,t,n){return{type:Q,payload:{user:e,roomId:t,message:n}}},changeActiveRoom:function(e){return{type:W,payload:{roomId:e}}}})((function(e){var t=e.user,n=e.rooms,c=e.closeRoom,o=e.sendMessage,s=e.changeActiveRoom,u=Pt(),l=Object(ut.a)(),i=Object(r.useState)(0),m=Object(ot.a)(i,2),d=m[0],p=m[1],b=function(e){var r=e.message;o(t,n[d].id,r)},f=function(e,t){p(t)};return a.a.createElement("div",{className:u.root},a.a.createElement("h2",null,"ChatTabs"),n.length>0?a.a.createElement(a.a.Fragment,null,a.a.createElement(lt.a,{position:"static",color:"default"},a.a.createElement(it.a,{value:d,onChange:f,indicatorColor:"primary",textColor:"primary",variant:"scrollable","aria-label":"full width tabs example"},n.map((function(e,t){return a.a.createElement(jt,Object.assign({key:e.id,label:e.name,handleClose:function(){return n=e.id,r=t,c(n),void(d!==r&&r<d&&d>0?p((function(e){return e-1})):d===r&&d>0&&p((function(e){return e-1})));var n,r},handleChangeActiveRoom:function(){return t=e.id,void s(t);var t},isActive:(n=t,r=e.id,d===n&&(s(r),!0)),newMesSize:e.newMesSize},function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}(t)));var n,r})))),n.map((function(e,t){return a.a.createElement(bt,{key:e.id,value:d,index:t,dir:l.direction},a.a.createElement(qt,{room:e}))})),a.a.createElement(Jt,{onSubmit:b})):null)})),Vt=function(){return a.a.createElement("div",{className:"room-content"},a.a.createElement(ct,null),a.a.createElement(Bt,null))},Wt=Object(Je.b)((function(e){return{}}),{signOut:function(){return{type:Re}}})((function(e){var t=e.signOut;return a.a.createElement("nav",null,a.a.createElement("div",{className:"nav-wrapper darken-2 padding-navbar"},a.a.createElement("span",{className:"brand-logo"},"ChatRoom"),a.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},a.a.createElement("li",null,a.a.createElement(Pe.c,{to:"/rooms/all"},"All room")),a.a.createElement("li",null,a.a.createElement(Pe.b,{to:"/",onClick:function(){return t()}},"Logout")))))})),Xt=function(){return a.a.createElement("div",null,a.a.createElement(Wt,null),a.a.createElement(Be.b,{path:"/rooms/all",exact:!0},a.a.createElement(Vt,null)))},Kt=n(94),Yt=n.n(Kt),Zt=(n(370),Object(Xe.a)({form:"auth",validate:function(e){var t=e.email,n=e.password,r={};return t?Yt.a.validate(t)||(r.email="invalid email"):r.email="email is required",n?n.length<6&&(r.password="to short"):r.password="password is required",r}})((function(e){var t=e.handleSubmit;return a.a.createElement("div",{className:"row"},a.a.createElement("h2",null,"login"),a.a.createElement("form",{className:"col s12",onSubmit:t},a.a.createElement("div",{className:"row"},a.a.createElement(We.a,{name:"email",id:"email",className:"validate",htmlFor:"email",type:"email",component:Lt})),a.a.createElement("div",{className:"row"},a.a.createElement(We.a,{name:"password",id:"password",className:"validate",htmlFor:"password",type:"password",component:Lt})),a.a.createElement(Pe.b,{to:"/auth/register"},"Registaration"),a.a.createElement("div",null,a.a.createElement("input",{className:"btn blue lighten-2 btn-marg",type:"submit",value:"login"}))))}))),$t=Object(Xe.a)({form:"auth",validate:function(e){var t=e.name,n=e.email,r=e.password,a={};return t?t.length>30&&(a.name="name to big"):a.name="name is required",n?Yt.a.validate(n)||(a.email="invalid email"):a.email="email is required",r?r.length<6&&(a.password="password to short"):a.password="password is required",a}})((function(e){var t=e.handleSubmit;return a.a.createElement("div",{className:"row"},a.a.createElement("h2",null,"Registaration"),a.a.createElement("form",{className:"col s12",onSubmit:t},a.a.createElement("div",{className:"row"},a.a.createElement(We.a,{name:"name",id:"name",className:"validate",htmlFor:"name",type:"text",component:Lt})),a.a.createElement("div",{className:"row"},a.a.createElement(We.a,{name:"email",id:"email",className:"validate",htmlFor:"email",type:"email",component:Lt})),a.a.createElement("div",{className:"row"},a.a.createElement(We.a,{name:"password",id:"password",className:"validate",htmlFor:"password",type:"password",component:Lt})),a.a.createElement("div",null,a.a.createElement("input",{className:"btn blue lighten-2 btn-marg",type:"submit",value:"Registaration"}))))}));var en={signUp:function(e,t,n){return{type:je,payload:{name:e,email:t,password:n}}},signIn:function(e,t){return{type:ye,payload:{email:e,password:t}}}},tn=Object(Je.b)((function(e){return{user:e[ve].user,error:e[ve].error}}),en)((function(e){e.user;var t=e.error,n=e.signUp,r=e.signIn;return t&&console.error("Error: ".concat(t)),a.a.createElement("div",{className:"container"},a.a.createElement(Be.b,{path:"/auth/login",exact:!0},a.a.createElement(Zt,{onSubmit:function(e){var t=e.email,n=e.password;return r(t,n)}})),a.a.createElement(Be.b,{path:"/auth/register",exact:!0},a.a.createElement($t,{onSubmit:function(e){var t=e.name,r=e.email,a=e.password;return n(t,r,a)}})))})),nn=Object(Je.b)((function(e){return{user:e[ve].user}}),{autoEnterSite:function(){return{type:Ee}}})((function(e){var t=e.user,n=e.autoEnterSite;Object(r.useEffect)((function(){n()}),[n]);var c=function(e){return e?a.a.createElement(Be.d,null,a.a.createElement(Be.b,{path:"/rooms"},a.a.createElement(Xt,null)),a.a.createElement(Be.a,{to:"/rooms"})):a.a.createElement(Be.d,null,a.a.createElement(Be.b,{path:"/auth"},a.a.createElement(tn,null)),a.a.createElement(Be.a,{to:"/auth/login"}))}(!!t);return a.a.createElement(Pe.a,null,a.a.createElement("div",null,c))}));var rn=function(){return a.a.createElement(Je.a,{store:Le},a.a.createElement(nn,null))};o.a.render(a.a.createElement(rn,null),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.b9a143e8.chunk.js.map